# Информация по ДЗ

## Файлы для проверки

- scrapy_homework/wiki_parser/wiki_parser/spiders/movie.py - Основной код

- scrapy_homework/wiki_parser/wiki_parser/spiders/movies_wiki.csv - Файл с итоговыми данными
    
    
    - _title_ - название фильма
    - _genre_ - жанры
    - _director_ - режисер (или несколько)
    - _country_ - страны производста
    - _year_ - год выпуска
    - _id_ - уникальный номер в системе IMDB
    - _rating_ - оценка пользователей в системе IMDB  

Так же был изменен settings.py - ROBOTSTXT_OBEY = False, без этого не работало корректно.


## Дополнительное задание

Тут я нашел [информацию от разработчиков IMDB]('https://developer.imdb.com/non-commercial-datasets/') которые открыли доступ к совоим датасетам. И я использовал [этот]('https://datasets.imdbws.com/title.ratings.tsv.gz')

- _tconst_ - уникальный номер в системе IMDB
- _averageRating_ - рейтинг
- _numVotes_ - количество голосов

Логика у меня такая: я добавил в класс MovieSpider init, где стандартными методами python загружал и разархивировал этот датасет, и приводил его в необходимый вид. Далее уже в функции page_parser, во время возврата основных данных подтягивал необходимую информацию.

## ВАЖНО

В реальной работе я бы так не делал. Просто в рамках ДЗ хотелось соблюдать логику один скрипт > один запуск > один вывод. Процес вытягивания данных для каждого фильма отдельно, очень тормозит код. В реальной работе я бы создал граф(например airflow),где отдельно срабатывает парсер и отдельно обновляется датасет с рейтингом. А потом в процессе очистки данных регулярными выражениями, я бы просто с мерджил два этих датасета.

## Выводы:

- На сайте викиаедии указано 35 034, в моем датасете столько же строчек

- В данных встречаются пропуски, теоретически их можно (а в рабочих задачах нужно) отлавливать, и можно достичь почти полного их отсутствия, но в рамках задачи не было сказанно про уровень допустимых пропусков.

    - _title_ - пропусков нет
    - _genre_ - 710 пропусков
    - _director_ - 202 пропуска
    - _country_ - 404 пропуска
    - _year_ - 3408 пропусков. Дату на сайте пишут многими способами, я взял только два
    - _id_ - 937 Важно понимать, что это не всегда ошибка парсера. Иногда его просто не существует
    - _rating_ - 2244 пропуска. Казалось бы, что должно быть столько же пропусков, что и в id, однако у некоторых малоизвестных фильмов попросту нет оценок. Заменять это значение нулем, я считаю некорректно. 

- Данные сырые безусловно, после парсинга их надо чистить. Встречаются лишние Элементы и артефакты в тексте




